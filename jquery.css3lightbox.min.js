(function(b){var n={type:"text",width:800,height:600,spinner:{speed:100,segments:8},css:{shadow:{"background-color":"black",opacity:0.8,position:"fixed",left:0,top:0,bottom:0,right:0,"z-index":1E3},modal:{"background-color":"black",color:"white",padding:10,position:"fixed","z-index":1001,border:"5px solid white","border-radius":10,"-moz-border-radius":10,"-webkit-border-radius":10,"box-shadow":"0 0 10px #fff","-moz-box-shadow":"0 0 10px #fff","-webkit-box-shadow":"0 0 10px #fff"},close_button:{cursor:"pointer",
position:"absolute",top:-10,right:-10,width:20,height:18,"border-radius":20,"-moz-border-radius":20,"-webkit-border-radius":20,"box-shadow":"5px 5px 5px #000","-moz-box-shadow":"5px 5px 5px #000","-webkit-box-shadow":"5px 5px 5px #000",border:"2px solid white",background:"black",color:"white","font-family":"sans-serif","font-size":14,"font-weight":"bold",padding:"2px 0 0 0px",margin:0,"text-align":"center"},spinner:{width:200,height:200,position:"absolute"},spinner_ball:{position:"absolute",width:5,
height:5,"background-color":"white","border-radius":5,"-moz-border-radius":5,"-webkit-border-radius":5,"box-shadow":"0 0 2px #000","-moz-box-shadow":"0 0 2px #000","-webkit-box-shadow":"0 0 2px #000"}}},o=function(a){var e={modal:{width:a.width,height:a.height,left:(b(window).width()-a.width)/2,top:(b(window).height()-a.height)/2},spinner:{left:(a.width-a.css.spinner.width)/2,top:(a.height-a.css.spinner.height)/2}};b.extend(true,a.css,e)};b.extend({lightbox:function(a){a=b.extend(true,{},n,a);o(a);
for(var e=b("<div />",{css:a.css.shadow}),c=b("<div />",{css:a.css.modal}),f=b("<div />",{css:a.css.spinner}),g=b("<div />",{text:"X",css:a.css.close_button}),j=[],h=Math.min(a.css.spinner.width,a.css.spinner.height),i=0;i<a.spinner.segments;i++){a.css.spinner_ball.top=h/2+25*Math.sin(Math.PI*2*i/a.spinner.segments);a.css.spinner_ball.left=h/2+25*Math.cos(Math.PI*2*i/a.spinner.segments);j.push(b("<div />",{css:a.css.spinner_ball}))}b.each(j,function(){f.append(this)});var k=true,l=function(d){if(k){j[d].stop(true,
true).fadeTo(0,1).fadeOut(a.spinner.segments*a.spinner.speed);setTimeout(function(){l((d+1)%a.spinner.segments)},a.spinner.speed)}};h=function(){c.remove();e.remove()};e.click(h);g.click(h);c.append(g);b("body").append(e).append(c);if(a.type=="text")c.append(b("<div />",{text:a.text}));else if(a.type=="div"){g=a.element.clone();c.append(g);g.show()}else if(a.type=="iframe"){c.append(f);l(0);var m=b("<iframe />",{src:a.url,css:{width:0,height:0,border:"none"},load:function(){f.remove();k=false;m.width("100%").height("100%")}});
c.append(m)}else if(a.type=="ajax"){c.append(f);l(0);b.get(a.url,function(d){f.remove();k=false;d=b("<div />",{html:d,css:{"overflow-y":"scroll",height:a.height}});c.append(d)})}else throw"unsupported lightbox type";}})})(jQuery);
